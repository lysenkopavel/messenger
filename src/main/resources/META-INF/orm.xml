<?xml version="1.0" encoding="UTF-8"?>

<entity-mappings
        xmlns="http://java.sun.com/xml/ns/persistence/orm"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/persistence/orm
						    http://java.sun.com/xml/ns/persistence/orm_2_0.xsd"
        version="2.0">


    <!--<persistence-unit-metadata>-->
    <!--<xml-mapping-metadata-complete/>-->
    <!--<persistence-unit-defaults>-->
    <!--<schema>messenger</schema>-->
    <!--&lt;!&ndash;<catalog>mycatalog</catalog>&ndash;&gt;-->
    <!--<cascade-persist/>-->
    <!--</persistence-unit-defaults>-->
    <!--</persistence-unit-metadata>-->

    <!--<sql-result-set-mapping name="ResultListMappingXml">-->
    <!--<entity-result entity-claentities.UserUser">-->
    <!--<field-result name="userID" column="authorId"/>-->
    <!--<field-result name="firstName" column="firstName"/>-->
    <!--<field-result name="lastName" column="lastName"/>-->
    <!--<field-result name="version" column="version"/>-->
    <!--</entity-result>-->
    <!--</sql-result-set-mapping>-->


    <entity class="entities.User">
        <table name="USERS"/>
        <attributes>
            <id name="userID">
                <column name="USER_ID"/>
                <generated-value strategy="SEQUENCE"/>
            </id>

            <basic name="nickname">
                <column name="NICKNAME" length="100"/>
            </basic>

            <many-to-many name="userChats" fetch="EAGER">
                <join-table name="USERS_CHATS">
                    <join-column name="U_ID" referenced-column-name="USER_ID"/>
                    <inverse-join-column name="C_ID" referenced-column-name="CHAT_ID"/>
                </join-table>
                <cascade>
                    <cascade-all/>
                </cascade>
            </many-to-many>

        </attributes>
    </entity>


    <entity class="entities.Chat">
        <table name="CHATS"/>
        <attributes>

            <id name="chatID">
                <column name="CHAT_ID"/>
                <generated-value strategy="SEQUENCE"/>
            </id>


            <basic name="chatTitle">
                <column name="TITLECHAT" length="100"/>
            </basic>

            <many-to-many name="usersInChat" mapped-by="userChats" fetch="EAGER">
                <cascade>
                    <cascade-all/>
                </cascade>
            </many-to-many>


        </attributes>
    </entity>


</entity-mappings>
